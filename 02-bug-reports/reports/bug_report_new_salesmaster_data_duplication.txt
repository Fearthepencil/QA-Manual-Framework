Bug Report Template - ACME E-commerce Testing

Title
Data Duplication in new-salesmaster Elasticsearch Index for Cherre Versions (Dev Environment)

Description
The new-salesmaster Elasticsearch index contains duplicated recordedBuyer and recordedSeller data for masters that originate from Cherre versions. While multiple other data sources (sales.masters table, sold_properties.participant_groups, sales.participant_groups, and sales-comps-master-v020 index) all contain correct data without duplication, the new-salesmaster index shows duplicate entries for each recordedBuyer and recordedSeller. This issue specifically affects masters from Cherre versions that have filled recordedBuyer/Seller data and occurs on the dev environment.

Expected Behaviour
The new-salesmaster Elasticsearch index should contain the same non-duplicated data as other sources. Each recordedBuyer and recordedSeller should appear only once per master, consistent with the data stored in the database tables and other indices.

Actual Behaviour
- The new-salesmaster index duplicates each recordedBuyer and recordedSeller entry
- Database tables and other indices remain correct and non-duplicated
- Duplication occurs specifically for masters from Cherre versions
- Each participant appears twice in the recordedBuyerOwner and recordedSellerOwner arrays

Steps to Reproduce
1. Identify a master that originates from Cherre versions with recordedBuyer/Seller data (e.g., Master ID: 3929046)
2. Query participant_groups data in sales.masters table
3. Check sold_properties.participant_groups for the same data
4. Verify data in sales.participant_groups table
5. Check sales-comps-master-v020 index for the master
6. Query new-salesmaster Elasticsearch index for the same master
7. Compare results - observe duplication only in new-salesmaster index

Evidence
Master ID: 3929046

Database participant_groups (CORRECT - No Duplication):
```json
[{
  "recordedBuyers": [
    {"owner": {"id": 15249513, "name": "TANSY BROWN"}, "landlordId": 15249513, "rawLandlordName": "TANSY BROWN"},
    {"owner": {"id": 669247, "name": "David A Brown", "displayName": "BROWN DAVID A TRUST"}, "landlordId": 669247, "rawLandlordName": "DAVID A BROWN"}
  ],
  "recordedSellers": [
    {"owner": {"id": 15596591, "name": "LOREN L MCCUE"}, "landlordId": 15596591, "rawLandlordName": "LOREN L MCCUE"},
    {"owner": {"id": 15704741, "name": "RYAN D MCCUE"}, "landlordId": 15704741, "rawLandlordName": "RYAN D MCCUE"}
  ]
}]
```

new-salesmaster Index (INCORRECT - Duplicated):
```json
{
  "recordedBuyerOwner": [
    {"id": 15249513, "name": "TANSY BROWN", "lastUpdated": "2025-06-30T15:29:23.735325Z"},
    {"id": 669247, "name": "David A Brown", "displayName": "BROWN DAVID A TRUST", "lastUpdated": "2025-06-30T13:41:26.726672Z"},
    {"id": 15249513, "name": "TANSY BROWN", "lastUpdated": "2025-06-30T15:29:23.735325Z"},
    {"id": 669247, "name": "David A Brown", "displayName": "BROWN DAVID A TRUST", "lastUpdated": "2025-06-30T13:41:26.726672Z"}
  ],
  "recordedSellerOwner": [
    {"id": 15596591, "name": "LOREN L MCCUE", "lastUpdated": "2025-06-30T15:36:51.957245Z"},
    {"id": 15704741, "name": "RYAN D MCCUE", "lastUpdated": "2025-06-30T15:38:31.534506Z"},
    {"id": 15596591, "name": "LOREN L MCCUE", "lastUpdated": "2025-06-30T15:36:51.957245Z"},
    {"id": 15704741, "name": "RYAN D MCCUE", "lastUpdated": "2025-06-30T15:38:31.534506Z"}
  ]
}
```

Data Sources Status:
- ✅ sales.masters table: Correct data, no duplication
- ✅ sold_properties.participant_groups: Correct data, no duplication  
- ✅ sales.participant_groups: Correct data, no duplication
- ✅ sales-comps-master-v020 index: Correct data, no duplication
- ❌ new-salesmaster index: DUPLICATED data (issue)

Technical Details
- Issue Type: Data duplication in Elasticsearch indexing process
- Affected System: new-salesmaster Elasticsearch index
- Affected Data: recordedBuyerOwner and recordedSellerOwner arrays
- Scope: Masters from Cherre versions with recordedBuyer/Seller data
- Environment: Dev environment
- Database Tables: Unaffected (contain correct data)
- Other Indices: Unaffected (sales-comps-master-v020 works correctly)

Impact Assessment
- Severity: Medium - Affects data quality in search index but database remains correct
- Data Quality Impact: Incorrect search results and analytics from new-salesmaster index
- Search Impact: Users may see duplicate participants in search results
- Analytics Impact: Skewed metrics and reporting based on new-salesmaster index
- Performance Impact: Increased index size due to duplicate data

Reproducibility
- Frequency: Always for masters from Cherre versions with recordedBuyer/Seller data
- Conditions: Specific to Cherre version-derived masters
- Dependencies: Requires masters with populated recordedBuyer/Seller participant data
- Environment: Dev environment confirmed

Suggested Fix
1. Investigate the data transformation pipeline from database to new-salesmaster Elasticsearch index
2. Review indexing logic specifically for Cherre version data processing
3. Implement deduplication logic during Elasticsearch indexing process
4. Check for incorrect aggregation or multiple data source merging causing duplication
5. Compare indexing logic between sales-comps-master-v020 (working) and new-salesmaster (broken)
6. Add validation to ensure participant data uniqueness during indexing
7. Reindex affected masters after fixing the duplication logic
8. Add automated tests to prevent future duplication issues

Bug Report Metadata
- Reported By: [Your Name]
- Date Reported: [YYYY-MM-DD HH:MM:SS]
- Bug ID: [To be assigned]
- Status: New
- Assigned To: [Backend Developer/Search Team]
- Evidence Location: Master ID 3929046, new-salesmaster index
- Environment: Dev
- Component: Elasticsearch indexing, new-salesmaster index
- Data Source: Cherre versions
- Linked Test Case: [Reference if available]
- Requirement Reference: [Req-X-X if available]

--- 